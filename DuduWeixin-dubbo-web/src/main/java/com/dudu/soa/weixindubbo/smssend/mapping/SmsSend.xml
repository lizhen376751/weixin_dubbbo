<?xml version="1.0" encoding = "UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dudu.soa.weixindubbo.smssend.mapper.SmsSendDao">

    <resultMap type="com.dudu.soa.weixindubbo.smssend.module.SmsSendLog" id="smssend">
        <id property="id" column="id"></id>
        <result property="serviceType" column="serviceType"/>
        <result property="mobilePhone" column="mobilePhone"/>
        <result property="sendTime" column="sendTime"/>
        <result property="identifyingCode" column="identifyingCode"/>
        <result property="plateNumber" column="plateNumber"/>
        <result property="lmcode" column="lmcode"/>
    </resultMap>

    <insert id="addSmsSend" parameterType="com.dudu.soa.weixindubbo.smssend.module.SmsSendLog" useGeneratedKeys="true"
            keyProperty="id" flushCache="true">
        INSERT INTO
        DDWX_SMSSend (
        serviceType,
        mobilePhone,
        sendTime,
        identifyingCode,
        plateNumber,
        lmcode
        )
        VALUES (
        #{serviceType},
        #{mobilePhone},
        #{sendTime},
        #{identifyingCode},
        #{plateNumber},
        #{lmcode}
        )
    </insert>


    <select id="getSmsSend" parameterType="com.dudu.soa.weixindubbo.smssend.module.SmsSendLog" resultMap="smssend">
        select top 1
        id,
        serviceType,
        mobilePhone,
        sendTime,
        identifyingCode,
        plateNumber,
        lmcode
        from
        DDWX_SMSSend
        WHERE
        serviceType=#{serviceType}
        AND mobilePhone=#{mobilePhone}
        AND plateNumber=#{plateNumber}
        AND lmcode=#{lmcode}

    </select>


    <delete id="deleteSmsSend" parameterType="com.dudu.soa.weixindubbo.smssend.module.SmsSendLog">
        delete from DDWX_SMSSend
        where serviceType=#{serviceType}
        AND mobilePhone=#{mobilePhone}
        AND plateNumber=#{plateNumber}
        AND lmcode=#{lmcode}
    </delete>

</mapper>