<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dudu.soa.weixindubbo.menu.mapper.WeiXinMenuDao">

    <!--查询自定义菜单-->
    <select id="queryWeiXinMenu" parameterType="java.lang.String" resultType="com.dudu.soa.weixindubbo.menu.module.ResultQueryMenu">
        SELECT
            id,
            title,
            menuUrl,
            condition,
            createtime,
            moduleLayer,
            sequence,
            moduleUpId,
            shopCode,
            historyId
        FROM
            DATA_weixin_caidan
        WHERE
            shopCode = #{shopCode}
    </select>
    <!--添加自定义菜单-->
    <insert id="addWeiXinMenu" parameterType="com.dudu.soa.weixindubbo.menu.module.AddWeiXinMenu" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO DATA_weixin_caidan
                ( title ,
                  menuUrl ,
                  condition ,
                  createtime ,
                  moduleLayer ,
                  sequence ,
                  moduleUpId ,
                  shopCode ,
                  historyId
                )
        VALUES  ( #{title} ,
                  #{menuUrl} ,
                  #{condition} ,
                  getDate(),
                  #{moduleLayer} ,
                  #{sequence} ,
                  #{moduleUpId} ,
                  #{shopCode} ,
                  #{historyId}
                )
    </insert>
    <!--修改自定义菜单-->
    <update id="updateWeiXinMenu" parameterType="com.dudu.soa.weixindubbo.menu.module.AddWeiXinMenu">
        UPDATE DATA_weixin_caidan
        SET title = #{title},
         menuUrl = #{menuUrl},
         <if test="null != condition and condition != ''">
             condition = #{condition},
         </if>
         moduleLayer = #{moduleLayer},
         sequence = #{sequence},
        <if test="null != moduleUpId and moduleUpId != ''">
            moduleUpId = #{moduleUpId},
        </if>
        <if test="null != historyId and historyId != ''">
            historyId = #{historyId},
        </if>
        shopCode = #{shopCode}
        WHERE
            id = #{id}
        AND shopCode = #{shopCode}
    </update>

</mapper>
