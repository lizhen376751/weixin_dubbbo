<?xml version="1.0" encoding = "UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dudu.soa.weixindubbo.shopweixinuser.mapper.ShopWeixinUserDao">

    <resultMap type="com.dudu.soa.weixindubbo.shopweixinuser.module.ShopWeixinUser" id="shopweixinuser">
        <result property="id" column="ID"/>
        <result property="userName" column="UserName"/>
        <result property="userPass" column="UserPass"/>
        <result property="mobile" column="Mobile"/>
        <result property="address" column="Address"/>
        <result property="engine" column="Engine"/>
        <result property="iDCode" column="IDCode"/>
        <result property="registCode" column="RegistCode"/>
        <result property="recordDate" column="RecordDate"/>
        <result property="brand" column="Brand"/>
        <result property="serise" column="Serise"/>
        <result property="city" column="City"/>
        <result property="state" column="State"/>
        <result property="registerTime" column="RegisterTime"/>
        <result property="citycode" column="city_code"/>
        <result property="openId" column="OpenId"/>
        <result property="openU" column="OpenU"/>
        <result property="shopcode" column="shopcode"/>
        <result property="xingMing" column="XingMing"/>
        <result property="xingBie" column="XingBie"/>
        <result property="carPaiLiang" column="CarPaiLiang"/>
        <result property="nickname" column="nickname"/>
        <result property="updateTime" column="updateTime"/>
    </resultMap>

    <!-- 查看所有的短信签名 -->
    <select id="queryShopWeixinUser" parameterType="com.dudu.soa.weixindubbo.shopweixinuser.module.ShopWeixinUser"
            resultMap="shopweixinuser">
        SELECT
        *
        FROM
        UserInfo
        WHERE 1=1
        <if test="id != null and id != ''">
            AND ID = #{id}
        </if>

        <if test="userName != null and userName != ''">
            AND UserName = #{userName}
        </if>

        <if test="mobile != null and mobile != ''">
            AND Mobile = #{mobile}
        </if>

        <if test="shopcode != null and shopcode != ''">
            AND shopcode = #{shopcode}
        </if>
    </select>


    <insert id="addShopWeixinUser" parameterType="com.dudu.soa.weixindubbo.shopweixinuser.module.ShopWeixinUser"
            flushCache="true">
        INSERT INTO
        UserInfo (
        UserName,
        UserPass,
        Mobile,
        Address,
        Engine,
        IDCode,
        RegistCode,
        RecordDate,
        Brand,
        Serise,
        City,
        city_code,
        OpenId,
        OpenU,
        shopcode,
        XingMing,
        XingBie,
        CarPaiLiang,
        nickname,
        updateTime
        )
        VALUES (
        #{userName},
        #{userPass},
        #{mobile},
        #{address},
        #{engine},
        #{iDCode},
        #{registCode},
        #{recordDate},
        #{brand},
        #{serise},
        #{city},
        #{citycode},
        #{openId},
        #{openU},
        #{shopcode},
        #{xingMing},
        #{xingBie},
        #{carPaiLiang},
        #{nickname},
        #{updateTime}
        )
    </insert>

    <update id="updateShopWeixinUser" parameterType="com.dudu.soa.weixindubbo.shopweixinuser.module.ShopWeixinUser"
            flushCache="true">
        update UserInfo
        <trim prefix="set" suffixOverrides=",">
            <if test="userPass !=null and userPass != ''">
                UserPass = #{userPass},
            </if>


            <if test="mobile !=null and mobile != ''">
                Mobile = #{mobile},
            </if>


            <if test="address !=null and address != ''">
                Address = #{address},
            </if>


            <if test="engine !=null and engine != ''">
                Engine = #{engine},
            </if>


            <if test="serise !=null and serise != ''">
                Serise = #{serise},
            </if>


            <if test="brand !=null and brand != ''">
                Brand = #{brand},
            </if>


            <if test="city !=null and city != ''">
                City = #{city},
            </if>


            <if test="openId !=null and openId != ''">
                OpenId = #{openId},
            </if>


            <if test="xingMing !=null and xingMing != ''">
                XingMing = #{xingMing},
            </if>


            <if test="xingBie !=null and xingBie != ''">
                XingBie = #{xingBie},
            </if>


            <if test="nickname !=null and nickname != ''">
                nickname = #{nickname},
            </if>
            updateTime=getdate()
        </trim>

        WHERE
        shopcode = #{shopcode} AND UserName = #{userName}
    </update>

    <delete id="deleteShopWeixinUser" flushCache="true">
        delete UserInfo from  where Mobile = #{mobile} AND shopcode = #{shopcode} AND UserName = #{userName}
    </delete>
</mapper>