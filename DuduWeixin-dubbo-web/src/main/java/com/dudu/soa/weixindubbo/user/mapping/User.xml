<?xml version="1.0" encoding = "UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dudu.soa.weixindubbo.user.mapper.UserDao">

        <resultMap type="com.dudu.soa.weixindubbo.user.module.User" id="user">
            <id property="id" column="id"></id>
            <result property="mobilePhone" column="mobilePhone"/>
            <result property="plateNumber" column="plateNumber"/>
            <result property="lmcode" column="lmcode"/>
            <result property="password" column="password"/>
        </resultMap>

    <insert id="adduser" parameterType="com.dudu.soa.weixindubbo.user.module.User" useGeneratedKeys="true"
            keyProperty="id" flushCache="true">
        INSERT INTO
        DDWX_user (
        mobilePhone,
        plateNumber,
        lmcode,
        password

        )
        VALUES (
        #{mobilePhone},
        #{plateNumber},
        #{lmcode},
        #{password}

        )
    </insert>



        <select id="getUser" parameterType="String" resultMap="user">
            select top 1
            id,
            mobilePhone,
            plateNumber,
            lmcode,
            password
            from
            DDWX_user
            WHERE
            lmcode=#{lmcode} AND plateNumber=#{plateNumber}

        </select>


        <delete id="delectUser" parameterType="com.dudu.soa.weixindubbo.user.module.User">
            delete from DDWX_user
            where plateNumber=#{plateNumber}

        </delete>


        <update id="updateuser" parameterType="com.dudu.soa.weixindubbo.user.module.User" flushCache="true">
            update DDWX_user
            <trim prefix="set" suffixOverrides=",">
                <if test="mobilePhone !=null and mobilePhone != ''">
                    mobilePhone = #{mobilePhone},
                </if>

                <if test="password !=null and password != ''">
                    password = #{password}
                </if>
            </trim>
            where
            lmcode=#{lmcode} AND plateNumber=#{plateNumber}


        </update>


</mapper>